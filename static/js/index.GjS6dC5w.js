import{d as e,r as a,a_ as s,aB as l,aC as o,ax as r,aQ as t,aZ as n,B as i,aD as c,N as d,o as p,e as u,k as m,a0 as g,g as f,aO as h,w as v,a$ as w,c as j,aR as x,aS as _,t as y,aH as b,a4 as C,$ as V,ad as K,a2 as k,a3 as q,aM as E}from"./index.DYY2ROny.js";import{E as $}from"./el-card.B4TYu7hi.js";import{E as z,a as A}from"./el-form-item.Do5Aa9mu.js";import{E as D}from"./el-image-viewer.zsxON6-e.js";import"./el-tooltip.l0sNRNKZ.js";import{E as R}from"./el-popper.BUhKH33V.js";import{S as U}from"./index.CL7Q0Kts.js";import{E as B}from"./el-tag.S1-Wf1d4.js";import{c as L,_ as O}from"./el-switch.CNVV2TTo.js";import{_ as H}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./castArray.DZ8at28t.js";import"./_initCloneObject.gM8DssxH.js";import"./index.DJa_mpbc.js";import"./debounce.BQourpJx.js";import"./position.CpGkJteg.js";import"./isUndefined.DgmxjSXK.js";import"./el-scrollbar.EtFhfBaD.js";import"./dropdown.FRm44emQ.js";import"./refs.BzQmKG2e.js";const I={class:"login-container"},M={class:"absolute-lt flex-x-end p-3 w-full"},S={class:"text-center relative"},G={class:"flex-y-center w-full"},N={class:"flex-y-center w-full"},T={class:"flex-y-center w-full"},F=H(e({__name:"index",setup(e){const H=a("");s().then((e=>{H.value=e.data})).catch((e=>{}));const F=l(),J=o(),{t:Q}=r(),Z=a(J.theme===t.DARK),P=a(!0),W=a(!1),X=a(!1),Y=a(),ee=a(z),{height:ae}=n(),se=a({username:"",password:""}),le=i((()=>({username:[{required:!0,trigger:"blur",message:Q("login.message.username.required")}],password:[{required:!0,trigger:"blur",message:Q("login.message.password.required")},{min:6,message:Q("login.message.password.min"),trigger:"blur"}],captchaCode:[{required:!0,trigger:"blur",message:Q("login.message.captchaCode.required")}]})));function oe(){w().then((({data:e})=>{se.value.captchaKey=e.captchaKey,Y.value=e.captchaBase64}))}const re=c();function te(){ee.value.validate((e=>{e&&(W.value=!0,F.login(se.value).then((()=>{const e=re.query,a=e.redirect??"/",s=Object.keys(e).reduce(((a,s)=>("redirect"!==s&&(a[s]=e[s]),a)),{});E.push({path:a,query:s})})).catch((()=>{oe()})).finally((()=>{W.value=!1})))}))}const ne=()=>{const e=J.theme===t.DARK?t.LIGHT:t.DARK;J.changeTheme(e)};function ie(e){e instanceof KeyboardEvent&&(X.value=e.getModifierState("CapsLock"))}return d((()=>{ae.value<600?P.value=!1:P.value=!0})),p((()=>{oe()})),(e,a)=>{const s=L,l=O,o=B,r=U,t=k,n=A,i=R,c=D,d=q,p=z,w=$;return j(),u("div",I,[m("div",M,[g(s,{modelValue:f(Z),"onUpdate:modelValue":a[0]||(a[0]=e=>h(Z)?Z.value=e:null),"inline-prompt":"","active-icon":f(x),"inactive-icon":f(_),onChange:ne},null,8,["modelValue","active-icon","inactive-icon"]),g(l,{class:"ml-2 cursor-pointer"})]),g(w,{class:"!border-none !bg-transparent !rounded-4% w-100 <sm:w-85"},{default:v((()=>[m("div",S,[m("h2",null,y(f(b).title),1),g(o,{class:"ml-2 absolute-rt"},{default:v((()=>[C(y(f(H)),1)])),_:1})]),g(p,{ref_key:"loginFormRef",ref:ee,model:f(se),rules:f(le),class:"login-form"},{default:v((()=>[g(n,{prop:"username"},{default:v((()=>[m("div",G,[g(r,{"icon-class":"user",class:"mx-2"}),g(t,{ref:"username",modelValue:f(se).username,"onUpdate:modelValue":a[1]||(a[1]=e=>f(se).username=e),placeholder:e.$t("login.username"),name:"username",size:"large",class:"h-[48px]"},null,8,["modelValue","placeholder"])])])),_:1}),g(i,{visible:f(X),content:e.$t("login.capsLock"),placement:"right"},{default:v((()=>[g(n,{prop:"password"},{default:v((()=>[m("div",N,[g(r,{"icon-class":"lock",class:"mx-2"}),g(t,{modelValue:f(se).password,"onUpdate:modelValue":a[2]||(a[2]=e=>f(se).password=e),placeholder:e.$t("login.password"),type:"password",name:"password",onKeyup:[ie,V(te,["enter"])],size:"large",class:"h-[48px] pr-2","show-password":""},null,8,["modelValue","placeholder"])])])),_:1})])),_:1},8,["visible","content"]),g(n,{prop:"captchaCode"},{default:v((()=>[m("div",T,[g(r,{"icon-class":"captcha",class:"mx-2"}),g(t,{modelValue:f(se).captchaCode,"onUpdate:modelValue":a[3]||(a[3]=e=>f(se).captchaCode=e),"auto-complete":"off",size:"large",class:"flex-1",placeholder:e.$t("login.captchaCode"),onKeyup:V(te,["enter"])},null,8,["modelValue","placeholder"]),g(c,{onClick:oe,src:f(Y),class:"rounded-tr-md rounded-br-md cursor-pointer h-[48px]"},null,8,["src"])])])),_:1}),g(d,{loading:f(W),type:"primary",size:"large",class:"w-full",onClick:K(te,["prevent"])},{default:v((()=>[C(y(e.$t("login.login")),1)])),_:1},8,["loading"])])),_:1},8,["model","rules"])])),_:1})])}}}),[["__scopeId","data-v-ba695567"]]);export{F as default};
