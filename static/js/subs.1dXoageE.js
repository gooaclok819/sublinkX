import{bd as e,d as t,am as r,r as a,bq as n,o,O as i,aU as l,B as u,c as s,e as d,a0 as c,w as f,a4 as h,P as v,l as p,t as g,k as m,g as y,a1 as C,aA as w,Y as E,aI as _,a2 as M,a3 as S}from"./index.9PHSMUIB.js";import{E as N}from"./el-card.DWbysKpS.js";import{E as b,a as R,c as A,d as k,b as I}from"./el-table-column.haX2jq5s.js";import{E as x}from"./el-tag.CLWce1kX.js";import{E as T,a as P}from"./el-select.dUFpYm6H.js";import"./el-scrollbar.DlPh6Z7D.js";import"./el-popper.e9kr8u9Q.js";import{E as z}from"./el-link.BTv-HaC_.js";import{g as V,E as B,a as O}from"./node.B7CBv-vw.js";import"./el-tooltip.l0sNRNKZ.js";import{E as U,a as D}from"./el-col.DNKSa6YX.js";import{E as L}from"./el-dialog.Dis4ipFy.js";import{g as j}from"./temp.gJIG3-Be.js";import{_ as F}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./isEqual.DDyRMzJ4.js";import"./_initCloneObject.cf8iq1wq.js";import"./debounce.i1DMUZzi.js";import"./index.D7zGuEZp.js";import"./strings.CQ_np2th.js";import"./castArray.BN0gQOTw.js";import"./index.D6nSmJHY.js";import"./isUndefined.DgmxjSXK.js";import"./use-dialog.CybRpRek.js";import"./refs.CNClepWF.js";function H(t){return e({url:"/api/v1/subcription/delete",method:"delete",params:t})}var Q,Y,G,q,K=function(){return K=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},K.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError,function(e){var t=function(){function t(e,r,a,o){if(this.version=e,this.errorCorrectionLevel=r,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(o<-1||o>7)throw new RangeError("Mask value out of range");this.size=4*e+17;for(var i=[],l=0;l<this.size;l++)i.push(!1);for(l=0;l<this.size;l++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();var u=this.addEccAndInterleave(a);if(this.drawCodewords(u),-1==o){var s=1e9;for(l=0;l<8;l++){this.applyMask(l),this.drawFormatBits(l);var d=this.getPenaltyScore();d<s&&(o=l,s=d),this.applyMask(l)}}n(0<=o&&o<=7),this.mask=o,this.applyMask(o),this.drawFormatBits(o),this.isFunction=[]}return t.encodeText=function(r,a){var n=e.QrSegment.makeSegments(r);return t.encodeSegments(n,a)},t.encodeBinary=function(r,a){var n=e.QrSegment.makeBytes(r);return t.encodeSegments([n],a)},t.encodeSegments=function(e,a,i,l,u,s){if(void 0===i&&(i=1),void 0===l&&(l=40),void 0===u&&(u=-1),void 0===s&&(s=!0),!(t.MIN_VERSION<=i&&i<=l&&l<=t.MAX_VERSION)||u<-1||u>7)throw new RangeError("Invalid value");var d,c;for(d=i;;d++){var f=8*t.getNumDataCodewords(d,a),h=o.getTotalBits(e,d);if(h<=f){c=h;break}if(d>=l)throw new RangeError("Data too long")}for(var v=0,p=[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH];v<p.length;v++){var g=p[v];s&&c<=8*t.getNumDataCodewords(d,g)&&(a=g)}for(var m=[],y=0,C=e;y<C.length;y++){var w=C[y];r(w.mode.modeBits,4,m),r(w.numChars,w.mode.numCharCountBits(d),m);for(var E=0,_=w.getData();E<_.length;E++){var M=_[E];m.push(M)}}n(m.length==c);var S=8*t.getNumDataCodewords(d,a);n(m.length<=S),r(0,Math.min(4,S-m.length),m),r(0,(8-m.length%8)%8,m),n(m.length%8==0);for(var N=236;m.length<S;N^=253)r(N,8,m);for(var b=[];8*b.length<m.length;)b.push(0);return m.forEach((function(e,t){return b[t>>>3]|=e<<7-(7&t)})),new t(d,a,b,u)},t.prototype.getModule=function(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]},t.prototype.getModules=function(){return this.modules},t.prototype.drawFunctionPatterns=function(){for(var e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);var t=this.getAlignmentPatternPositions(),r=t.length;for(e=0;e<r;e++)for(var a=0;a<r;a++)0==e&&0==a||0==e&&a==r-1||e==r-1&&0==a||this.drawAlignmentPattern(t[e],t[a]);this.drawFormatBits(0),this.drawVersion()},t.prototype.drawFormatBits=function(e){for(var t=this.errorCorrectionLevel.formatBits<<3|e,r=t,o=0;o<10;o++)r=r<<1^1335*(r>>>9);var i=21522^(t<<10|r);n(i>>>15==0);for(o=0;o<=5;o++)this.setFunctionModule(8,o,a(i,o));this.setFunctionModule(8,7,a(i,6)),this.setFunctionModule(8,8,a(i,7)),this.setFunctionModule(7,8,a(i,8));for(o=9;o<15;o++)this.setFunctionModule(14-o,8,a(i,o));for(o=0;o<8;o++)this.setFunctionModule(this.size-1-o,8,a(i,o));for(o=8;o<15;o++)this.setFunctionModule(8,this.size-15+o,a(i,o));this.setFunctionModule(8,this.size-8,!0)},t.prototype.drawVersion=function(){if(!(this.version<7)){for(var e=this.version,t=0;t<12;t++)e=e<<1^7973*(e>>>11);var r=this.version<<12|e;n(r>>>18==0);for(t=0;t<18;t++){var o=a(r,t),i=this.size-11+t%3,l=Math.floor(t/3);this.setFunctionModule(i,l,o),this.setFunctionModule(l,i,o)}}},t.prototype.drawFinderPattern=function(e,t){for(var r=-4;r<=4;r++)for(var a=-4;a<=4;a++){var n=Math.max(Math.abs(a),Math.abs(r)),o=e+a,i=t+r;0<=o&&o<this.size&&0<=i&&i<this.size&&this.setFunctionModule(o,i,2!=n&&4!=n)}},t.prototype.drawAlignmentPattern=function(e,t){for(var r=-2;r<=2;r++)for(var a=-2;a<=2;a++)this.setFunctionModule(e+a,t+r,1!=Math.max(Math.abs(a),Math.abs(r)))},t.prototype.setFunctionModule=function(e,t,r){this.modules[t][e]=r,this.isFunction[t][e]=!0},t.prototype.addEccAndInterleave=function(e){var r=this.version,a=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(r,a))throw new RangeError("Invalid argument");for(var o=t.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][r],i=t.ECC_CODEWORDS_PER_BLOCK[a.ordinal][r],l=Math.floor(t.getNumRawDataModules(r)/8),u=o-l%o,s=Math.floor(l/o),d=[],c=t.reedSolomonComputeDivisor(i),f=0,h=0;f<o;f++){var v=e.slice(h,h+s-i+(f<u?0:1));h+=v.length;var p=t.reedSolomonComputeRemainder(v,c);f<u&&v.push(0),d.push(v.concat(p))}var g=[],m=function(e){d.forEach((function(t,r){(e!=s-i||r>=u)&&g.push(t[e])}))};for(f=0;f<d[0].length;f++)m(f);return n(g.length==l),g},t.prototype.drawCodewords=function(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var r=0,o=this.size-1;o>=1;o-=2){6==o&&(o=5);for(var i=0;i<this.size;i++)for(var l=0;l<2;l++){var u=o-l,s=!(o+1&2)?this.size-1-i:i;!this.isFunction[s][u]&&r<8*e.length&&(this.modules[s][u]=a(e[r>>>3],7-(7&r)),r++)}}n(r==8*e.length)},t.prototype.applyMask=function(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(var t=0;t<this.size;t++)for(var r=0;r<this.size;r++){var a=void 0;switch(e){case 0:a=(r+t)%2==0;break;case 1:a=t%2==0;break;case 2:a=r%3==0;break;case 3:a=(r+t)%3==0;break;case 4:a=(Math.floor(r/3)+Math.floor(t/2))%2==0;break;case 5:a=r*t%2+r*t%3==0;break;case 6:a=(r*t%2+r*t%3)%2==0;break;case 7:a=((r+t)%2+r*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][r]&&a&&(this.modules[t][r]=!this.modules[t][r])}},t.prototype.getPenaltyScore=function(){for(var e=0,r=0;r<this.size;r++){for(var a=!1,o=0,i=[0,0,0,0,0,0,0],l=0;l<this.size;l++)this.modules[r][l]==a?5==++o?e+=t.PENALTY_N1:o>5&&e++:(this.finderPenaltyAddHistory(o,i),a||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),a=this.modules[r][l],o=1);e+=this.finderPenaltyTerminateAndCount(a,o,i)*t.PENALTY_N3}for(l=0;l<this.size;l++){a=!1;var u=0;for(i=[0,0,0,0,0,0,0],r=0;r<this.size;r++)this.modules[r][l]==a?5==++u?e+=t.PENALTY_N1:u>5&&e++:(this.finderPenaltyAddHistory(u,i),a||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),a=this.modules[r][l],u=1);e+=this.finderPenaltyTerminateAndCount(a,u,i)*t.PENALTY_N3}for(r=0;r<this.size-1;r++)for(l=0;l<this.size-1;l++){var s=this.modules[r][l];s==this.modules[r][l+1]&&s==this.modules[r+1][l]&&s==this.modules[r+1][l+1]&&(e+=t.PENALTY_N2)}for(var d=0,c=0,f=this.modules;c<f.length;c++){d=f[c].reduce((function(e,t){return e+(t?1:0)}),d)}var h=this.size*this.size,v=Math.ceil(Math.abs(20*d-10*h)/h)-1;return n(0<=v&&v<=9),n(0<=(e+=v*t.PENALTY_N4)&&e<=2568888),e},t.prototype.getAlignmentPatternPositions=function(){if(1==this.version)return[];for(var e=Math.floor(this.version/7)+2,t=2*Math.floor((8*this.version+3*e+5)/(4*e-4)),r=[6],a=this.size-7;r.length<e;a-=t)r.splice(1,0,a);return r},t.getNumRawDataModules=function(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");var r=(16*e+128)*e+64;if(e>=2){var a=Math.floor(e/7)+2;r-=(25*a-10)*a-55,e>=7&&(r-=36)}return n(208<=r&&r<=29648),r},t.getNumDataCodewords=function(e,r){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][e]},t.reedSolomonComputeDivisor=function(e){if(e<1||e>255)throw new RangeError("Degree out of range");for(var r=[],a=0;a<e-1;a++)r.push(0);r.push(1);var n=1;for(a=0;a<e;a++){for(var o=0;o<r.length;o++)r[o]=t.reedSolomonMultiply(r[o],n),o+1<r.length&&(r[o]^=r[o+1]);n=t.reedSolomonMultiply(n,2)}return r},t.reedSolomonComputeRemainder=function(e,r){for(var a=r.map((function(e){return 0})),n=function(e){var n=e^a.shift();a.push(0),r.forEach((function(e,r){return a[r]^=t.reedSolomonMultiply(e,n)}))},o=0,i=e;o<i.length;o++){n(i[o])}return a},t.reedSolomonMultiply=function(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");for(var r=0,a=7;a>=0;a--)r=r<<1^285*(r>>>7),r^=(t>>>a&1)*e;return n(r>>>8==0),r},t.prototype.finderPenaltyCountPatterns=function(e){var t=e[1];n(t<=3*this.size);var r=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(r&&e[0]>=4*t&&e[6]>=t?1:0)+(r&&e[6]>=4*t&&e[0]>=t?1:0)},t.prototype.finderPenaltyTerminateAndCount=function(e,t,r){return e&&(this.finderPenaltyAddHistory(t,r),t=0),t+=this.size,this.finderPenaltyAddHistory(t,r),this.finderPenaltyCountPatterns(r)},t.prototype.finderPenaltyAddHistory=function(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)},t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t}();function r(e,t,r){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(var a=t-1;a>=0;a--)r.push(e>>>a&1)}function a(e,t){return!!(e>>>t&1)}function n(e){if(!e)throw new Error("Assertion error")}e.QrCode=t;var o=function(){function e(e,t,r){if(this.mode=e,this.numChars=t,this.bitData=r,t<0)throw new RangeError("Invalid argument");this.bitData=r.slice()}return e.makeBytes=function(t){for(var a=[],n=0,o=t;n<o.length;n++){r(o[n],8,a)}return new e(e.Mode.BYTE,t.length,a)},e.makeNumeric=function(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");for(var a=[],n=0;n<t.length;){var o=Math.min(t.length-n,3);r(parseInt(t.substring(n,n+o),10),3*o+1,a),n+=o}return new e(e.Mode.NUMERIC,t.length,a)},e.makeAlphanumeric=function(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");var a,n=[];for(a=0;a+2<=t.length;a+=2){var o=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a));r(o+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a+1)),11,n)}return a<t.length&&r(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a)),6,n),new e(e.Mode.ALPHANUMERIC,t.length,n)},e.makeSegments=function(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]},e.makeEci=function(t){var a=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)r(t,8,a);else if(t<16384)r(2,2,a),r(t,14,a);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");r(6,3,a),r(t,21,a)}return new e(e.Mode.ECI,0,a)},e.isNumeric=function(t){return e.NUMERIC_REGEX.test(t)},e.isAlphanumeric=function(t){return e.ALPHANUMERIC_REGEX.test(t)},e.prototype.getData=function(){return this.bitData.slice()},e.getTotalBits=function(e,t){for(var r=0,a=0,n=e;a<n.length;a++){var o=n[a],i=o.mode.numCharCountBits(t);if(o.numChars>=1<<i)return Infinity;r+=4+i+o.bitData.length}return r},e.toUtf8ByteArray=function(e){e=encodeURI(e);for(var t=[],r=0;r<e.length;r++)"%"!=e.charAt(r)?t.push(e.charCodeAt(r)):(t.push(parseInt(e.substring(r+1,r+3),16)),r+=2);return t},e.NUMERIC_REGEX=/^[0-9]*$/,e.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,e.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e}();e.QrSegment=o}(Q||(Q={})),Y=Q||(Q={}),G=Y.QrCode||(Y.QrCode={}),q=function(){function e(e,t){this.ordinal=e,this.formatBits=t}return e.LOW=new e(0,1),e.MEDIUM=new e(1,0),e.QUARTILE=new e(2,3),e.HIGH=new e(3,2),e}(),G.Ecc=q,function(e){var t,r;t=e.QrSegment||(e.QrSegment={}),r=function(){function e(e,t){this.modeBits=e,this.numBitsCharCount=t}return e.prototype.numCharCountBits=function(e){return this.numBitsCharCount[Math.floor((e+7)/17)]},e.NUMERIC=new e(1,[10,12,14]),e.ALPHANUMERIC=new e(2,[9,11,13]),e.BYTE=new e(4,[8,16,16]),e.KANJI=new e(8,[8,10,12]),e.ECI=new e(7,[0,0,0]),e}(),t.Mode=r}(Q||(Q={}));var $=Q,W={L:$.QrCode.Ecc.LOW,M:$.QrCode.Ecc.MEDIUM,Q:$.QrCode.Ecc.QUARTILE,H:$.QrCode.Ecc.HIGH},X=function(){try{(new Path2D).addPath(new Path2D)}catch(e){return!1}return!0}();function J(e){return e in W}function Z(e,t){void 0===t&&(t=0);var r=[];return e.forEach((function(e,a){var n=null;e.forEach((function(o,i){if(!o&&null!==n)return r.push("M".concat(n+t," ").concat(a+t,"h").concat(i-n,"v1H").concat(n+t,"z")),void(n=null);if(i!==e.length-1)o&&null===n&&(n=i);else{if(!o)return;null===n?r.push("M".concat(i+t,",").concat(a+t," h1v1H").concat(i+t,"z")):r.push("M".concat(n+t,",").concat(a+t," h").concat(i+1-n,"v1H").concat(n+t,"z"))}}))})),r.join("")}function ee(e,t,r,a){var n=a.width,o=a.height,i=a.x,l=a.y,u=e.length+2*r,s=Math.floor(.1*t),d=u/t,c=(n||s)*d,f=(o||s)*d,h=null==i?e.length/2-c/2:i*d,v=null==l?e.length/2-f/2:l*d,p=null;if(a.excavate){var g=Math.floor(h),m=Math.floor(v);p={x:g,y:m,w:Math.ceil(c+h-g),h:Math.ceil(f+v-m)}}return{x:h,y:v,h:f,w:c,excavation:p}}function te(e,t){return e.slice().map((function(e,r){return r<t.y||r>=t.y+t.h?e:e.map((function(e,r){return(r<t.x||r>=t.x+t.w)&&e}))}))}var re,ae,ne={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:"L",validator:function(e){return J(e)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0},imageSettings:{type:Object,required:!1,default:function(){return{}}},gradient:{type:Boolean,required:!1,default:!1},gradientType:{type:String,required:!1,default:"linear",validator:function(e){return["linear","radial"].indexOf(e)>-1}},gradientStartColor:{type:String,required:!1,default:"#000"},gradientEndColor:{type:String,required:!1,default:"#fff"}},oe=K(K({},ne),{renderAs:{type:String,required:!1,default:"canvas",validator:function(e){return["canvas","svg"].indexOf(e)>-1}}}),ie=t({name:"QRCodeSvg",props:ne,setup:function(e){var t,o=a(0),i=a(""),l=function(){var r=e.value,a=e.level,n=e.margin>>>0,l=J(a)?a:"L",u=$.QrCode.encodeText(r,W[l]).getModules();if(o.value=u.length+2*n,e.imageSettings.src){var s=ee(u,e.size,n,e.imageSettings);t={x:s.x+n,y:s.y+n,width:s.w,height:s.h},s.excavation&&(u=te(u,s.excavation))}i.value=Z(u,n)},u=function(){if(!e.gradient)return null;var t="linear"===e.gradientType?{x1:"0%",y1:"0%",x2:"100%",y2:"100%"}:{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"};return r("linear"===e.gradientType?"linearGradient":"radialGradient",K({id:"qr-gradient"},t),[r("stop",{offset:"0%",style:{stopColor:e.gradientStartColor}}),r("stop",{offset:"100%",style:{stopColor:e.gradientEndColor}})])};return l(),n(l),function(){return r("svg",{width:e.size,height:e.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(o.value," ").concat(o.value)},[r("defs",{},[u()]),r("rect",{width:"100%",height:"100%",fill:e.background}),r("path",{fill:e.gradient?"url(#qr-gradient)":e.foreground,d:i.value}),e.imageSettings.src&&r("image",K({href:e.imageSettings.src},t))])}}}),le=t({name:"QRCodeCanvas",props:ne,setup:function(e,t){var l=a(null),u=a(null),s=function(){var t=e.value,r=e.level,a=e.size,n=e.margin,o=e.background,i=e.foreground,s=e.gradient,d=e.gradientType,c=e.gradientStartColor,f=e.gradientEndColor,h=n>>>0,v=J(r)?r:"L",p=l.value;if(p){var g=p.getContext("2d");if(g){var m=$.QrCode.encodeText(t,W[v]).getModules(),y=m.length+2*h,C=u.value,w={x:0,y:0,width:0,height:0},E=e.imageSettings.src&&null!=C&&0!==C.naturalWidth&&0!==C.naturalHeight;if(E){var _=ee(m,e.size,h,e.imageSettings);w={x:_.x+h,y:_.y+h,width:_.w,height:_.h},_.excavation&&(m=te(m,_.excavation))}var M=window.devicePixelRatio||1,S=a/y*M;if(p.height=p.width=a*M,g.scale(S,S),g.fillStyle=o,g.fillRect(0,0,y,y),s){var N=void 0;(N="linear"===d?g.createLinearGradient(0,0,y,y):g.createRadialGradient(y/2,y/2,0,y/2,y/2,y/2)).addColorStop(0,c),N.addColorStop(1,f),g.fillStyle=N}else g.fillStyle=i;X?g.fill(new Path2D(Z(m,h))):m.forEach((function(e,t){e.forEach((function(e,r){e&&g.fillRect(r+h,t+h,1,1)}))})),E&&g.drawImage(C,w.x,w.y,w.width,w.height)}}};o(s),n(s);var d=t.attrs.style;return function(){return r(i,[r("canvas",K(K({},t.attrs),{ref:l,style:K(K({},d),{width:"".concat(e.size,"px"),height:"".concat(e.size,"px")})})),e.imageSettings.src&&r("img",{ref:u,src:e.imageSettings.src,style:{display:"none"},onLoad:s})])}}}),ue=t({name:"Qrcode",render:function(){var e=this.$props,t=e.renderAs,a=e.value,n=e.size,o=e.margin,i=e.level,l=e.background,u=e.foreground,s=e.imageSettings,d=e.gradient,c=e.gradientType,f=e.gradientStartColor,h=e.gradientEndColor;return r("svg"===t?ie:le,{value:a,size:n,margin:o,level:i,background:l,foreground:u,imageSettings:s,gradient:d,gradientType:c,gradientStartColor:f,gradientEndColor:h})},props:oe}),se={exports:{}},de={exports:{}};re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ae={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&ae.rotl(e,8)|4278255360&ae.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=ae.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,a=0;r<e.length;r++,a+=8)t[a>>>5]|=e[r]<<24-a%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var a=e[r]<<16|e[r+1]<<8|e[r+2],n=0;n<4;n++)8*r+6*n<=8*e.length?t.push(re.charAt(a>>>6*(3-n)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,a=0;r<e.length;a=++r%4)0!=a&&t.push((re.indexOf(e.charAt(r-1))&Math.pow(2,-2*a+8)-1)<<2*a|re.indexOf(e.charAt(r))>>>6-2*a);return t}},de.exports=ae;var ce,fe,he,ve,pe,ge=de.exports,me={utf8:{stringToBytes:function(e){return me.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(me.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}},ye=me,Ce=function(e){return null!=e&&(we(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&we(e.slice(0,0))}(e)||!!e._isBuffer)};function we(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}ce=ge,fe=ye.utf8,he=Ce,ve=ye.bin,(pe=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?ve.stringToBytes(e):fe.stringToBytes(e):he(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=ce.bytesToWords(e),a=8*e.length,n=1732584193,o=-271733879,i=-1732584194,l=271733878,u=0;u<r.length;u++)r[u]=16711935&(r[u]<<8|r[u]>>>24)|4278255360&(r[u]<<24|r[u]>>>8);r[a>>>5]|=128<<a%32,r[14+(a+64>>>9<<4)]=a;var s=pe._ff,d=pe._gg,c=pe._hh,f=pe._ii;for(u=0;u<r.length;u+=16){var h=n,v=o,p=i,g=l;n=s(n,o,i,l,r[u+0],7,-680876936),l=s(l,n,o,i,r[u+1],12,-389564586),i=s(i,l,n,o,r[u+2],17,606105819),o=s(o,i,l,n,r[u+3],22,-1044525330),n=s(n,o,i,l,r[u+4],7,-176418897),l=s(l,n,o,i,r[u+5],12,1200080426),i=s(i,l,n,o,r[u+6],17,-1473231341),o=s(o,i,l,n,r[u+7],22,-45705983),n=s(n,o,i,l,r[u+8],7,1770035416),l=s(l,n,o,i,r[u+9],12,-1958414417),i=s(i,l,n,o,r[u+10],17,-42063),o=s(o,i,l,n,r[u+11],22,-1990404162),n=s(n,o,i,l,r[u+12],7,1804603682),l=s(l,n,o,i,r[u+13],12,-40341101),i=s(i,l,n,o,r[u+14],17,-1502002290),n=d(n,o=s(o,i,l,n,r[u+15],22,1236535329),i,l,r[u+1],5,-165796510),l=d(l,n,o,i,r[u+6],9,-1069501632),i=d(i,l,n,o,r[u+11],14,643717713),o=d(o,i,l,n,r[u+0],20,-373897302),n=d(n,o,i,l,r[u+5],5,-701558691),l=d(l,n,o,i,r[u+10],9,38016083),i=d(i,l,n,o,r[u+15],14,-660478335),o=d(o,i,l,n,r[u+4],20,-405537848),n=d(n,o,i,l,r[u+9],5,568446438),l=d(l,n,o,i,r[u+14],9,-1019803690),i=d(i,l,n,o,r[u+3],14,-187363961),o=d(o,i,l,n,r[u+8],20,1163531501),n=d(n,o,i,l,r[u+13],5,-1444681467),l=d(l,n,o,i,r[u+2],9,-51403784),i=d(i,l,n,o,r[u+7],14,1735328473),n=c(n,o=d(o,i,l,n,r[u+12],20,-1926607734),i,l,r[u+5],4,-378558),l=c(l,n,o,i,r[u+8],11,-2022574463),i=c(i,l,n,o,r[u+11],16,1839030562),o=c(o,i,l,n,r[u+14],23,-35309556),n=c(n,o,i,l,r[u+1],4,-1530992060),l=c(l,n,o,i,r[u+4],11,1272893353),i=c(i,l,n,o,r[u+7],16,-155497632),o=c(o,i,l,n,r[u+10],23,-1094730640),n=c(n,o,i,l,r[u+13],4,681279174),l=c(l,n,o,i,r[u+0],11,-358537222),i=c(i,l,n,o,r[u+3],16,-722521979),o=c(o,i,l,n,r[u+6],23,76029189),n=c(n,o,i,l,r[u+9],4,-640364487),l=c(l,n,o,i,r[u+12],11,-421815835),i=c(i,l,n,o,r[u+15],16,530742520),n=f(n,o=c(o,i,l,n,r[u+2],23,-995338651),i,l,r[u+0],6,-198630844),l=f(l,n,o,i,r[u+7],10,1126891415),i=f(i,l,n,o,r[u+14],15,-1416354905),o=f(o,i,l,n,r[u+5],21,-57434055),n=f(n,o,i,l,r[u+12],6,1700485571),l=f(l,n,o,i,r[u+3],10,-1894986606),i=f(i,l,n,o,r[u+10],15,-1051523),o=f(o,i,l,n,r[u+1],21,-2054922799),n=f(n,o,i,l,r[u+8],6,1873313359),l=f(l,n,o,i,r[u+15],10,-30611744),i=f(i,l,n,o,r[u+6],15,-1560198380),o=f(o,i,l,n,r[u+13],21,1309151649),n=f(n,o,i,l,r[u+4],6,-145523070),l=f(l,n,o,i,r[u+11],10,-1120210379),i=f(i,l,n,o,r[u+2],15,718787259),o=f(o,i,l,n,r[u+9],21,-343485551),n=n+h>>>0,o=o+v>>>0,i=i+p>>>0,l=l+g>>>0}return ce.endian([n,o,i,l])})._ff=function(e,t,r,a,n,o,i){var l=e+(t&r|~t&a)+(n>>>0)+i;return(l<<o|l>>>32-o)+t},pe._gg=function(e,t,r,a,n,o,i){var l=e+(t&a|r&~a)+(n>>>0)+i;return(l<<o|l>>>32-o)+t},pe._hh=function(e,t,r,a,n,o,i){var l=e+(t^r^a)+(n>>>0)+i;return(l<<o|l>>>32-o)+t},pe._ii=function(e,t,r,a,n,o,i){var l=e+(r^(t|~a))+(n>>>0)+i;return(l<<o|l>>>32-o)+t},pe._blocksize=16,pe._digestsize=16,se.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=ce.wordsToBytes(pe(e,t));return t&&t.asBytes?r:t&&t.asString?ve.bytesToString(r):ce.bytesToHex(r)};const Ee=l(se.exports),_e={class:"dialog-footer"},Me={class:"m-4"},Se={class:"dialog-footer"},Ne={key:0},be={key:0},Re={key:1},Ae=F(t({__name:"subs",setup(t){const r=a([]),n=a(""),l=a(""),F=a(""),Q=a(""),Y=a(""),G=a(!1),q=a(),K=a([]),$=a([]),W=a([]),X=a(!1),J=a([]),Z=a(""),ee=a([]);async function te(){const{data:t}=await e({url:"/api/v1/subcription/get",method:"get"});r.value=t}o((()=>{te(),async function(){const{data:e}=await j();ee.value=e}()})),o((async()=>{const{data:e}=await V();K.value=e}));const re=async()=>{const t=JSON.stringify({clash:n.value.trim(),surge:l.value.trim(),udp:!!W.value.includes("udp"),cert:!!W.value.includes("cert")});var r;"添加订阅"===F.value?(await(r={config:t,name:Q.value.trim(),nodes:$.value.join(",")},e({url:"/api/v1/subcription/add",method:"post",data:r,headers:{"Content-Type":"multipart/form-data"}})),te(),w.success("添加成功")):(await function(t){return e({url:"/api/v1/subcription/update",method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}})}({config:t,name:Q.value.trim(),nodes:$.value.join(","),oldname:Y.value}),te(),w.success("更新成功")),G.value=!1},ae=a([]),ne=e=>{ae.value=e},oe=()=>{F.value="添加订阅",Q.value="",Y.value="",W.value=[],n.value="./template/clash.yaml",l.value="./template/surge.conf",G.value=!0,$.value=[]},ie=()=>{0!==ae.value.length&&_.confirm("你是否要删除选中这些 ?","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{for(let e=0;e<ae.value.length;e++)H({id:ae.value[e].ID}),r.value=r.value.filter((t=>t.ID!==ae.value[e].ID));w({type:"success",message:"删除成功"})}))},le=a(1),se=a(10),de=e=>{se.value=e},ce=e=>{le.value=e},fe=u((()=>{const e=(le.value-1)*se.value,t=e+se.value;return r.value.slice(e,t)})),he=e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select();try{const e=document.execCommand("copy");w({type:e?"success":"warning",message:e?"复制成功！":"复制失败！"})}catch(r){w({type:"warning",message:"复制失败！"})}finally{document.body.removeChild(t)}},ve=a(!1),pe=["v2ray","clash","surge"],ge=a({}),me=a(""),ye=a(!1),Ce=a(""),we=(e,t)=>{ye.value=!0,Z.value=e,Ce.value=t},Ae=a("1");return(e,t)=>{const a=M,o=S,u=L,V=x,j=U,ae=D,ke=b,Ie=R,xe=B,Te=O,Pe=T,ze=P,Ve=A,Be=k,Oe=z,Ue=I,De=N;return s(),d("div",null,[c(u,{modelValue:ye.value,"onUpdate:modelValue":t[3]||(t[3]=e=>ye.value=e),width:"300px",style:{"text-align":"center"},title:Ce.value},{default:f((()=>[c(ue,{value:Z.value,size:200,level:"H"},null,8,["value"]),c(a,{modelValue:Z.value,"onUpdate:modelValue":t[0]||(t[0]=e=>Z.value=e)},null,8,["modelValue"]),c(o,{onClick:t[1]||(t[1]=e=>he(Z.value))},{default:f((()=>t[20]||(t[20]=[h("复制")]))),_:1}),c(o,{onClick:t[2]||(t[2]=e=>{return t=Z.value,void window.open(t);var t})},{default:f((()=>t[21]||(t[21]=[h("打开")]))),_:1})])),_:1},8,["modelValue","title"]),c(u,{modelValue:ve.value,"onUpdate:modelValue":t[5]||(t[5]=e=>ve.value=e),title:"客户端(点击二维码获取地址)",style:{"text-align":"center"}},{default:f((()=>[c(ae,null,{default:f((()=>[c(j,null,{default:f((()=>[c(V,{type:"success",size:"large"},{default:f((()=>t[22]||(t[22]=[h("自动识别")]))),_:1}),c(o,{onClick:t[4]||(t[4]=e=>we(me.value,"自动识别客户端"))},{default:f((()=>t[23]||(t[23]=[h("二维码")]))),_:1})])),_:1}),(s(!0),d(i,null,v(ge.value,((e,r)=>(s(),p(j,{style:{"margin-bottom":"10px"}},{default:f((()=>[c(V,{type:"success",size:"large"},{default:f((()=>[h(g(r),1)])),_:2},1024),c(o,{onClick:t=>we(`${e}&client=${r}`,r)},{default:f((()=>t[24]||(t[24]=[h("二维码")]))),_:2},1032,["onClick"])])),_:2},1024)))),256))])),_:1})])),_:1},8,["modelValue"]),c(u,{modelValue:X.value,"onUpdate:modelValue":t[6]||(t[6]=e=>X.value=e),title:"访问记录",width:"80%",draggable:""},{footer:f((()=>[m("div",_e,[c(Ie,{data:J.value,border:"",style:{width:"100%"}},{default:f((()=>[c(ke,{prop:"IP",label:"Ip"}),c(ke,{prop:"Count",label:"总访问次数"}),c(ke,{prop:"Addr",label:"来源"}),c(ke,{prop:"Date",label:"最近时间"})])),_:1},8,["data"])])])),_:1},8,["modelValue"]),c(u,{modelValue:G.value,"onUpdate:modelValue":t[17]||(t[17]=e=>G.value=e),title:F.value},{footer:f((()=>[m("div",Se,[c(o,{onClick:t[16]||(t[16]=e=>G.value=!1)},{default:f((()=>t[35]||(t[35]=[h("关闭")]))),_:1}),c(o,{type:"primary",onClick:re},{default:f((()=>t[36]||(t[36]=[h("确定")]))),_:1})])])),default:f((()=>[c(a,{modelValue:Q.value,"onUpdate:modelValue":t[7]||(t[7]=e=>Q.value=e),placeholder:"请输入订阅名称"},null,8,["modelValue"]),c(ae,null,{default:f((()=>[c(V,{type:"primary"},{default:f((()=>t[25]||(t[25]=[h("clash模版选择")]))),_:1}),c(Te,{modelValue:Ae.value,"onUpdate:modelValue":t[8]||(t[8]=e=>Ae.value=e),class:"ml-4"},{default:f((()=>[c(xe,{value:"1"},{default:f((()=>t[26]||(t[26]=[h("本地")]))),_:1}),c(xe,{value:"2"},{default:f((()=>t[27]||(t[27]=[h("url链接")]))),_:1})])),_:1},8,["modelValue"]),"1"===Ae.value?(s(),p(ze,{key:0,modelValue:n.value,"onUpdate:modelValue":t[9]||(t[9]=e=>n.value=e),placeholder:"clash模版文件"},{default:f((()=>[(s(!0),d(i,null,v(ee.value,(e=>(s(),p(Pe,{key:e.file,label:e.file,value:"./template/"+e.file},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(s(),p(a,{key:1,modelValue:n.value,"onUpdate:modelValue":t[10]||(t[10]=e=>n.value=e),placeholder:"clash模版文件"},null,8,["modelValue"]))])),_:1}),c(ae,null,{default:f((()=>[c(V,{type:"primary"},{default:f((()=>t[28]||(t[28]=[h("surge模版选择")]))),_:1}),c(Te,{modelValue:Ae.value,"onUpdate:modelValue":t[11]||(t[11]=e=>Ae.value=e),class:"ml-4"},{default:f((()=>[c(xe,{value:"1"},{default:f((()=>t[29]||(t[29]=[h("本地")]))),_:1}),c(xe,{value:"2"},{default:f((()=>t[30]||(t[30]=[h("url链接")]))),_:1})])),_:1},8,["modelValue"]),"1"===Ae.value?(s(),p(ze,{key:0,modelValue:l.value,"onUpdate:modelValue":t[12]||(t[12]=e=>l.value=e),placeholder:"surge模版文件"},{default:f((()=>[(s(!0),d(i,null,v(ee.value,(e=>(s(),p(Pe,{key:e.file,label:e.file,value:"./template/"+e.file},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(s(),p(a,{key:1,modelValue:l.value,"onUpdate:modelValue":t[13]||(t[13]=e=>l.value=e),placeholder:"surge模版文件"},null,8,["modelValue"]))])),_:1}),c(ae,null,{default:f((()=>[c(V,{type:"primary"},{default:f((()=>t[31]||(t[31]=[h("强制开启选项")]))),_:1}),c(Be,{modelValue:W.value,"onUpdate:modelValue":t[14]||(t[14]=e=>W.value=e),style:{margin:"5px"}},{default:f((()=>[c(Ve,{value:"udp"},{default:f((()=>t[32]||(t[32]=[h("udp")]))),_:1}),c(Ve,{value:"cert"},{default:f((()=>t[33]||(t[33]=[h("跳过证书")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),m("div",Me,[t[34]||(t[34]=m("p",null,"选择已有的节点列表",-1)),c(ze,{modelValue:$.value,"onUpdate:modelValue":t[15]||(t[15]=e=>$.value=e),multiple:"",placeholder:"Select",style:{width:"100%"}},{default:f((()=>[(s(!0),d(i,null,v(K.value,(e=>(s(),p(Pe,{key:e.Name,label:e.Name,value:e.Name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])])),_:1},8,["modelValue","title"]),c(De,null,{default:f((()=>[c(o,{type:"primary",onClick:oe},{default:f((()=>t[37]||(t[37]=[h("添加订阅")]))),_:1}),t[46]||(t[46]=m("div",{style:{"margin-bottom":"10px"}},null,-1)),c(Ie,{ref_key:"table",ref:q,data:y(fe),style:{width:"100%"},stripe:"",onSelectionChange:ne,"row-key":"ID","tree-props":{children:"Nodes"}},{default:f((()=>[c(ke,{type:"selection",fixed:"",prop:"ID",label:"id"}),c(ke,{prop:"Name",label:"订阅名称 / 节点"},{default:f((({row:e})=>[c(V,{type:e.Nodes?"primary":"success"},{default:f((()=>[h(g(e.Name),1)])),_:2},1032,["type"])])),_:1}),c(ke,{prop:"Link",label:"链接","show-overflow-tooltip":!0},{default:f((({row:e})=>[e.Nodes?(s(),d("div",Ne,[c(Oe,{type:"primary",size:"small",onClick:t=>(e=>{let t=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");ve.value=!0,me.value=`${t}/c/?token=${Ee(e)}`,pe.forEach((r=>{ge.value[r]=`${t}/c/?token=${Ee(e)}`}))})(e.Name)},{default:f((()=>t[38]||(t[38]=[h("客户端")]))),_:2},1032,["onClick"])])):C("",!0)])),_:1}),c(ke,{prop:"CreateDate",label:"创建时间",sortable:""}),c(ke,{label:"操作",width:"120"},{default:f((e=>[e.row.Nodes?(s(),d("div",be,[c(o,{link:"",type:"primary",size:"small",onClick:t=>{return a=e.row,X.value=!0,void E((()=>{r.value.forEach((e=>{e.ID===a.ID&&(J.value=e.SubLogs)}))}));var a}},{default:f((()=>t[39]||(t[39]=[h("记录")]))),_:2},1032,["onClick"]),c(o,{link:"",type:"primary",size:"small",onClick:t=>(e=>{for(let a=0;a<r.value.length;a++)if(r.value[a].ID===e.ID){const e="string"==typeof(t=r.value[a].Config)?JSON.parse(t):t;F.value="编辑订阅",Q.value=r.value[a].Name,Y.value=Q.value,e.udp&&W.value.push("udp"),e.cert&&W.value.push("cert"),n.value=e.clash,l.value=e.surge,G.value=!0,$.value=r.value[a].Nodes.map((e=>e.Name))}var t})(e.row)},{default:f((()=>t[40]||(t[40]=[h("编辑")]))),_:2},1032,["onClick"]),c(o,{link:"",type:"primary",size:"small",onClick:t=>{return r=e.row,void _.confirm(`你是否要删除 ${r.Name} ?`,"提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((async()=>{await H({id:r.ID}),te(),w({type:"success",message:"删除成功"})}));var r}},{default:f((()=>t[41]||(t[41]=[h("删除")]))),_:2},1032,["onClick"])])):(s(),d("div",Re,[c(o,{link:"",type:"primary",size:"small",onClick:t=>{return r=e.row,void he(r.Link);var r}},{default:f((()=>t[42]||(t[42]=[h("复制")]))),_:2},1032,["onClick"])]))])),_:1})])),_:1},8,["data"]),t[47]||(t[47]=m("div",{style:{"margin-top":"20px"}},null,-1)),c(o,{type:"info",onClick:t[18]||(t[18]=e=>{r.value.forEach((e=>{q.value.toggleRowSelection(e,!0)}))})},{default:f((()=>t[43]||(t[43]=[h("全选")]))),_:1}),c(o,{type:"warning",onClick:t[19]||(t[19]=e=>{q.value.clearSelection()})},{default:f((()=>t[44]||(t[44]=[h("取消选择")]))),_:1}),c(o,{type:"danger",onClick:ie},{default:f((()=>t[45]||(t[45]=[h("批量删除")]))),_:1}),t[48]||(t[48]=m("div",{style:{"margin-top":"20px"}},null,-1)),c(Ue,{onSizeChange:de,onCurrentChange:ce,"current-page":le.value,"page-size":se.value,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,30,40],total:r.value.length},null,8,["current-page","page-size","total"])])),_:1})])}}}),[["__scopeId","data-v-42072bec"]]);export{Ae as default};
